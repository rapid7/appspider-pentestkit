import React, { useState } from 'react';
import PropTypes from 'prop-types';
import styled from 'styled-components';

import {
    ExpandableCard,
    CardHeader,
    ExpandableCardIcon,
    CardContent,
} from 'rapid7-ui';

const StyledExpandable = styled.div`
    .card__header {
      cursor: pointer;
    }
`;

const Expandable = ({
    defaultOpen = false,
    title,
    children,
}) => {
    const [isOpen, setIsOpen] = useState(defaultOpen);

    return (
        <StyledExpandable>
            <ExpandableCard isOpen={isOpen}>
                <CardHeader
                    onClick={() => setIsOpen(!isOpen)}
                >
                    {title}
                    <ExpandableCardIcon/>
                </CardHeader>
                <CardContent>
                    {children}
                </CardContent>
            </ExpandableCard>
        </StyledExpandable>
    );
};

Expandable.propTypes = {
    defaultOpen: PropTypes.bool,
    title: PropTypes.string.isRequired,
    children: PropTypes.node.isRequired,
};

export default Expandable;

