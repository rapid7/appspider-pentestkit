//imports
const fs = require('fs')

const {
    PTK_MANIFEST_FILENAME,
    MAIN_MANIFEST_FILENAME,
    MANIFEST_LOCATION
} = require('./consts');

console.log(`Running Pre Commit Checks`)

// Check if PTK_MANIFEST_FILENAME exists if so rename back to MAIN_MANIFEST_FILENAME
fs.readFile(`${MANIFEST_LOCATION}${PTK_MANIFEST_FILENAME}`, 'utf8' , err => {
    if (err) {
        console.log(`${PTK_MANIFEST_FILENAME} not found no need to rename files`)
        console.log('Pre Commit Checks Complete')
        return
    }

    console.log(`Making ${PTK_MANIFEST_FILENAME} the main ${MAIN_MANIFEST_FILENAME} file`);
    fs.rename(
        `${MANIFEST_LOCATION}${PTK_MANIFEST_FILENAME}`,
        `${MANIFEST_LOCATION}${MAIN_MANIFEST_FILENAME}`,
            err => {
        if (err) {
            console.error(err);
            return
        }

        console.log(`${MAIN_MANIFEST_FILENAME} updated`);
        console.log('Pre Commit Checks Complete')
    })
})

